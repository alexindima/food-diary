<section class="password-reset">
    <fd-ui-card appearance="entry" class="password-reset__card">
        <div class="password-reset__header">
            <h1>{{ 'AUTH.RESET.TITLE' | translate }}</h1>
            <p>{{ 'AUTH.RESET.SUBTITLE' | translate }}</p>
        </div>

        @if (state() === 'ready') {
            <form [formGroup]="form" (ngSubmit)="onSubmit()" class="password-reset__form">
                <fd-ui-input
                    formControlName="password"
                    type="password"
                    [label]="'AUTH.RESET.PASSWORD' | translate"
                    [placeholder]="'AUTH.RESET.PASSWORD_PLACEHOLDER' | translate"
                    autocomplete="new-password"
                    [error]="getControlError(form.controls.password)"
                />

                <fd-ui-input
                    formControlName="confirmPassword"
                    type="password"
                    [label]="'AUTH.RESET.CONFIRM_PASSWORD' | translate"
                    [placeholder]="'AUTH.RESET.CONFIRM_PASSWORD_PLACEHOLDER' | translate"
                    autocomplete="new-password"
                    [error]="getControlError(form.controls.confirmPassword)"
                />

                <fd-ui-form-error [error]="errorMessage()" />

                <fd-ui-button
                    type="submit"
                    variant="primary"
                    [fullWidth]="true"
                    [disabled]="form.invalid || isSubmitting()"
                >
                    {{ 'AUTH.RESET.SAVE' | translate }}
                </fd-ui-button>
            </form>
        } @else {
            <div class="password-reset__state">
                <p class="password-reset__error">{{ errorMessage() }}</p>
                <fd-ui-button
                    type="button"
                    variant="secondary"
                    fill="outline"
                    [fullWidth]="true"
                    (click)="onBackToLogin()"
                >
                    {{ 'AUTH.RESET.BACK_TO_LOGIN' | translate }}
                </fd-ui-button>
            </div>
        }
    </fd-ui-card>
</section>
