<fd-ui-dialog
    [title]="'CONSUMPTION_DETAIL.TITLE' | translate"
    [subtitle]="(consumption.date | date:'dd.MM.yyyy, HH:mm') || undefined"
    size="lg"
>
    <div class="consumption-detail">
        <div class="consumption-detail__info">
            @if (consumption.comment) {
                <p class="consumption-detail__comment">{{ consumption.comment }}</p>
            }
            @if (consumption.mealType) {
                <p class="consumption-detail__text consumption-detail__text--muted">
                    {{ 'CONSUMPTION_DETAIL.MEAL_TYPE' | translate }}:
                    {{ ('MEAL_TYPES.' + consumption.mealType) | translate }}
                </p>
            }
            <div class="consumption-detail__items">
                <p class="consumption-detail__text consumption-detail__text--muted">
                    {{ 'CONSUMPTION_DETAIL.ITEMS_LIST' | translate:{ count: consumption.items.length } }}
                </p>
                <ul class="consumption-detail__item-list">
                    @for (item of consumption.items; track item) {
                        <li class="consumption-detail__item">
                            <span class="consumption-detail__item-name">{{ item.product?.name || item.recipe?.name }}</span>
                            @if (item.product) {
                                <span class="consumption-detail__item-meta">
                                    {{ item.amount | number:'1.0-2' }}
                                    {{ ('PRODUCT_AMOUNT_UNITS_SHORT.' + item.product.baseUnit) | translate }}
                                </span>
                            } @else if (item.recipe) {
                                <span class="consumption-detail__item-meta">
                                    {{ item.amount | number:'1.0-2' }}
                                    {{ 'CONSUMPTION_DETAIL.SERVINGS' | translate }}
                                </span>
                            }
                        </li>
                    }
                </ul>
            </div>
        </div>
        <fd-nutrients-summary [calories]="calories"
            [nutrientChartData]="nutrientChartData"
            [fiberValue]="consumption.totalFiber"
            [config]="nutrientSummaryConfig"
         />
    </div>

    <div fdUiDialogFooter class="consumption-detail__footer">
        <fd-ui-button size="sm" variant="secondary" fill="text" icon="edit" (click)="onEdit()">
            {{ 'CONSUMPTION_DETAIL.EDIT_BUTTON' | translate }}
        </fd-ui-button>
        <fd-ui-button size="sm" variant="danger" icon="delete" (click)="onDelete()">
            {{ 'CONSUMPTION_DETAIL.DELETE_BUTTON' | translate }}
        </fd-ui-button>
    </div>
</fd-ui-dialog>
