<div class="modal">
    <h2 class="modal__title">
        {{ recipe.name }}
    </h2>

    <div class="modal__body">
        <div class="modal__info">
            <p class="modal__text">
                <span class="modal__property-name">{{ 'RECIPE_DETAIL.PREP_TIME' | translate }}:</span>
                @if (getTotalPreparationTime() !== null) {
                    {{ getTotalPreparationTime() }} {{ 'RECIPE_DETAIL.MIN' | translate }}
                } @else {
                    â€”
                }
            </p>
            <p class="modal__text">
                <span class="modal__property-name">{{ 'RECIPE_DETAIL.INGREDIENTS_COUNT' | translate }}:</span>
                {{ getIngredientCount() }}
            </p>
        </div>

        <fd-nutrients-summary
            [calories]="calories"
            [nutrientChartData]="nutrientChartData"
            [config]="nutrientSummaryConfig"
            [fiberValue]="fiberValueComputed"
            fiberUnitKey="PRODUCT_AMOUNT_UNITS_SHORT.G"
        ></fd-nutrients-summary>
    </div>

    <div class="modal__footer">
        <div class="modal__footer-action-wrapper action-wrapper">
            @if (canModify) {
                <button
                    class="action-wrapper__button"
                    tuiButton
                    size="m"
                    iconStart="@tui.pen-line"
                    (click)="onEdit()"
                >
                    {{ 'RECIPE_DETAIL.EDIT_BUTTON' | translate }}
                </button>
                <button
                    class="action-wrapper__button action-wrapper__button--accent"
                    tuiButton
                    size="m"
                    appearance="accent"
                    iconStart="@tui.trash-2"
                    [disabled]="isDeleteDisabled"
                    (click)="onDelete()"
                ></button>
            } @else {
                <button
                    class="action-wrapper__button"
                    tuiButton
                    size="m"
                    appearance="secondary"
                    iconStart="@tui.copy"
                    [disabled]="isDuplicateInProgress"
                    (click)="onDuplicate()"
                >
                    {{ 'RECIPE_DETAIL.DUPLICATE_BUTTON' | translate }}
                </button>
            }
        </div>
        @if (warningMessage) {
            <p class="modal__footer-warning-message">{{ warningMessage | translate }}</p>
        }
    </div>
</div>

<ng-template #confirmDialog let-observer>
    <div class="recipe-detail__confirm">
        <p>
            {{ 'RECIPE_DETAIL.CONFIRM_DELETE' | translate }}
            <span class="recipe-detail__confirm-name">{{ recipe.name }}</span>?
        </p>
        <div class="recipe-detail__confirm-buttons">
            <button tuiButton size="m" (click)="observer.complete()">
                {{ 'RECIPE_DETAIL.CANCEL_BUTTON' | translate }}
            </button>
            <button tuiButton size="m" appearance="accent" (click)="observer.next(true); observer.complete()">
                {{ 'RECIPE_DETAIL.CONFIRM_BUTTON' | translate }}
            </button>
        </div>
    </div>
</ng-template>
